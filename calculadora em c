#include <stdio.h>
#include <stdlib.h>

double ter1, ter2, result;
int s;
char escfin;

void entrada(){
    printf("Digite o primeiro numero: ");
    scanf(" %lf", &ter1);
    printf("Digite o segundo numero: ");
    scanf(" %lf", &ter2);
}

int final(){
    printf("\nDeseja realizar outra operacao? (s/n): ");
    scanf(" %c", &escfin);
    switch(escfin){
        case 's':
        s=1;
        return s;

        case 'S':
        s=1;
        return s;

        case 'n':
        s=0;
        return s;

        case 'N':
        s=0;
        return s;

        default:
        printf("Resposta invalida. Por favor, digite 's' para sim ou 'n' para nao.");
        final();
    }
}
void soma(){
    entrada();
    result = ter1+ter2;
}

void sub(){
    entrada();
    result=ter1-ter2;
}

void mult(){
    entrada();
    result=ter1*ter2;
}

void divi(){
    entrada();
    if (ter2==0){
        result=0;
    }
    else{
        result=ter1/ter2;
    }
}

void op5(){
    printf("Obrigado por usar a calculadora! Ate a proxima.");
}

int opin(){
    int escin;
    scanf("%d", &escin);
    switch (escin)
    {
    case 1:
    soma();
    printf("O resultado eh: %g + %g = %g", ter1, ter2, result);
    break;
    
    case 2:
    sub();
    printf("O resultado eh: %g - %g = %g", ter1, ter2, result);
    break;

    case 3:
    mult();
    printf("O resultado eh: %g * %g = %g", ter1, ter2, result);
    break;

    case 4:
    divi();
    if (ter2==0){
        printf("Erro: nao eh possivel dividir por 0");
        final();
    }
    else{
        printf("O resultado eh: %g / %g = %g", ter1, ter2, result);
    }
    break;

    case 5:
    op5();
    return 0;

    default:
    printf("Opcao invalida. Favor, responder com 1, 2, 3, 4 ou 5: ");
    opin();
}}

int main(){

    #ifdef _WIN32
    system("cls");
#else
    system("clear");
#endif

    printf("===================================================\n\t>>>>> Calculadora <<<<<\n\t\t>>>>> Simples <<<<<\n===================================================\n");
    printf("Selecione uma operacao:\n1. Adicao\n2. Subtracao\n3. Multiplicacao\n4. Divisao\n5. Sair\nOpcao: ");
    char escin;
    scanf(" %c", &escin);
    switch (escin)
    {
    case 1:
    soma();
    printf("O resultado eh: %g + %g = %g", ter1, ter2, result);
        final();
    if (s==1){
        main();
    }
    else{
        printf("Obrigado por usar a calculadora! Ate a proxima.");
    }
    break;
    
    case 2:
    sub();
    printf("O resultado eh: %g - %g = %g", ter1, ter2, result);
        final();
    if (s==1){
        main();
    }
    else{
        printf("Obrigado por usar a calculadora! Ate a proxima.");
    }
    break;

    case 3:
    mult();
    printf("O resultado eh: %g * %g = %g", ter1, ter2, result);
        final();
    if (s==1){
        main();
    }
    else{
        printf("Obrigado por usar a calculadora! Ate a proxima.");
    }
    break;

    case 4:
    divi();
    if (ter2==0){
        printf("Erro: nao eh possivel dividir por 0");
        final();
    }
    else{
        printf("O resultado eh: %g / %g = %g", ter1, ter2, result);
        final();
    if (s==1){
        main();
    }
    else{
        printf("Obrigado por usar a calculadora! Ate a proxima.");
    }
    }
    break;

    case 5:
    op5();
    return 0;

    default:
    printf("Opcao invalida. Favor, responder com 1, 2, 3, 4 ou 5: ");
    opin();
    }
}
